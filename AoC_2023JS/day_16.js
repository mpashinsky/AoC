var pinput = `\\..-.-..../.....|......\\......................\\............\\.................|..............|........./.|.....
...-\\...|............|......../.|........-../................|.-..............-....\\.|..|.....................
.|..........\\................\\\\|................../..........................\\\\../|...-...-.|..........\\......
..................|\\....|.....-.......................-........\\.............................|/...............
.......-...........-......................./........../.......-............................\\.....-.....-.../..
./.\\...../....../..........\\..............|............|....|........................\\..../.../...|\\..........
..................................../...............................................\\..................-.\\....
......../.........................|...............................|...............\\|\\........\\....|....\\......
.--.........................../.../.......-.\\........../.\\.........|...............\\..|.....\\-.....\\....||\\...
......\\............|......../..\\................-..............\\-..-...|\\.../-............/.........|...\\.....
.........|.........-.........|............/............-..............\\../.......-.|\\\\..|......./.............
..........................\\........|.....\\...../..-......-............../.-|.............\\.\\...../.......\\....
.....\\.................-........../........-....|.....-......|.....................................-......-\\..
......|\\......................................./...../........|...|....../..................-....-.-..../.....
.../......\\...|./|..........\\.......-./..-../.................\\.....\\......../........./..|......-...|.../....
--|................\\.................|........../......\\|......|.........................\\....................
......../...........|./............../.....-.....-......../.................................-.....-...........
........................-.../..../..\\|..............................|\\..|.|\\................/........-...\\...|
\\.........-....../...|.\\............./......\\.......\\..../....\\|./-|.........|......-.......\\............|....
....|..........-.....|..../..........-/...-.............\\..\\...................\\................|......|......
............-..|...........-..../...-........../.../...-....-....../\\..............|........\\..............--.
.....\\.../......|..-..............|..-........................|......|.......|.........\\............/...\\...-.
|....................-.........../.....-........\\.../..........|..............................................
..-.............|..../............|........................|..../.........................\\..........-..-.../.
........-.|......\\.........../................/..|..\\................./.|....-................../...-......./.
\\|..-.......\\..............\\.|/......-|.........../........../.-...............\\....\\....\\..|..|..............
..........|.........\\............\\\\.../../|...........-................|....................|....|-\\/\\...\\....
.-........\\............-.......\\............-.............\\.\\......./...........././.|.\\-...-.\\./..........-/.
../.................-........//--...........|........./..../....|.....................................|....\\..
.............|....|........|........./.....\\..../..-..................../........|.....././...................
......................-....\\..........--.....\\..\\........../...........................--/....................
.|.../.......-.......\\.......|.............................-.............\\..-.\\../.......|............|......\\
...../.......-......|.............../.../...........................................|......-..........-.......
.............\\............................................../......................\\......../.................
|....................-...-\\..................\\................/.../...........................................
..|....-............/....................../......../...../......./.......\\.-................/................
.........../..-/...-...\\..............-..../...............-|.........-............/........|.|.-...|...\\.....
....../..-../.........-|...../...........................\\..............-..................--...-.............
-.................-......../.....|....................\\....................-../....................|./.....-..
......./...\\......../.|.|.........-.................................../....|..................................
...|........\\|\\.........\\...\\...-......-...............................\\.......//.|.....-.............../.....
........................../.|-...|....\\..........\\...................-..-............../............../.......
........../..-.......-....\\.......\\.............\\.|................................|......../..............-..
.......-................................-..................|../...\\....................................-......
...................................................................................../...\\...................-
..\\.-...................................|..............-.....|.........\\..................../.........-....\\..
...................../\\......-...........--.../............|...........|.....\\....//.....-........./...-|.....
......||.........|.-.........................|.........|.||..-....-......|.................\\.-../.............
...|.........|.......\\....\\................................../.................../....\\................\\......
..................../|...............||.-/........|../..................................../.\\......\\...-......
......./........./..-............................-.................\\...|...............-................-.....
.............................--...-....\\......................................|..........\\...-......./........
.......\\...-.............../......\\/.........................|........./..........|...........................
.........|.................................|.........../.|................................../...........-....|
...|...-...|...........................-....-.....................|../|........|...................../.....|..
.......-.....-..................\\.-........|...-..../........\\.......................\\......|..........-......
|......................\\..........-...............|........................../...........|....................
................|....|..................-......-/.......-....|..\\.../\\.|.....-..../...................../.|..\\
............/........................../....-........-...............-...|...............|..\\............./...
................./................\\.............../...........\\........\\....../............\\.....|........./..
..\\......./.-.....................-............-./......|..........-.............\\..../.......................
/..../....-........\\................................\\....|.............../\\-.............................-|...
................\\..................\\.--.|......//....|..|....|....../..................|.|...|....-|-.........
...................\\............\\....-............\\...........................................-./.............
.........................\\../............|..\\.........../................/..../.............-.................
..-..\\.........../............|..................................../............/.....-..............|.....|..
..|/......\\||.......\\............/....|........|.-........./.............|.....................|./............
..........-............../...........................................|.............|..-..../.|................
..|.../..|......................./..-.-..............\\../....................-..|............-...../.-........
.-....../..............\\..................\\................./....-...\\....\\...-.....\\.....-.-..............\\./
............./..../.\\........-..\\................................\\....../.|.....|.......|.........|....\\......
.-.....\\.-......-.|.-.........../..|...........\\....................................\\........|.//./.......-...
......-.......-/.........................-...../........|............./..................../............-.....
.............\\....|......-../...........\\...................../...............................................
../.......................................-...../.|..\\......|...-......../....|./..........\\.........|........
....../.............\\...................................\\........\\....-.........../..../..\\..................|
.../...-.....-................/.........|....................|..............-.........\\.......................
...................../..............-.......|......................./...|.....|../.|............../..........\\
.././....../........-........|.../.........../|..........|....../......-.....\\.............................\\..
............|........|................/....\\..............\\............/.....\\../..............|....../.......
|................\\..../...........................|.......\\......\\.....\\........../....../....................
........./...-...\\......./....................-...................................-............\\........-..../
............./............../.....................\\.-..../.................\\.........|.|............../.-...\\\\
.........|......-\\......\\.................../..|.........|......\\....\\..-..\\-.................................
...............|../.......................-.../......\\......|||................|..............................
.|...-............./...........-.......................|...............................|..............\\.......
.|.............|.........................................-........|-.\\.................-/.|...................
.|.......-||.........../..\\....\\.....................-....-....-.......-......-.........-|........|...........
.........\\........-...|........../............/.................../......./........................-..........
............\\.........................../..\\.......-............/.......................|.........\\...........
..\\..\\............/..................../..............-....../|.../...................|............./..../....
..\\.\\....\\.../............/.../.........................../.-.......-.....\\......|........|...../.........|.\\|
.....-...........\\..............-......-....-...../........-......|...../..\\..|/........-............./.../...
.....\\.......-........\\...-.............................................|....||.........|...-......\\..........
............|......................../.....-........././..............................................\\.....\\.
.\\.........\\......../........................-.............|........\\../.../...-......\\................|.....-
....|................|/.....................\\........|........................./|.....\\...-../.|......../-....
/..............-......-..............|..|.|.....................-\\.|../...\\..............................|.../
....\\/.........|\\....-..............\\......-.....................\\............\\........................\\......
......-...................\\...............-/../........-.../....................\\./..........-................
..........................\\.......|......\\.|\\....../......\\......../........-/............................/.|.
.......-....\\...................................../..............|../.......|......./..........|--.......-....
...-...|.............................|........-.....-.|...........|.....|..............\\..............-.......
-.\\...........\\......|.\\.............................\\...........|.........\\.............../\\.................
...../....................\\../|...........................\\.........|..................|........\\.|..-../.....
.-....-../.................................\\....../......|....../..............-...........-../...\\.../.......
.\\........-............................../..-...................|/..........|............................/....
../|..........|.........../...-....../.....|.-./...\\....-....\\|.\\.....|........./.-.....\\.....|./........|....
............\\.....\\...................-.\\-.-\\|...............................\\...............\\.....-..........
...|................-......................\\....|..\\.-..........|............../.....-...................../..`

var input = `.|...\\....
|.-.\\.....
.....|-...
........|.
..........
.........\\
..../.\\\\..
.-.-/..|..
.|....-|.\\
..//.|....`

var inputArr = pinput.split('\n').map(i=>i.split(''))
var visited = new Array(inputArr.length).fill([]).map(i=> new Array(inputArr[0].length).fill(0))
//console.log(inputArr)
//console.log(visited)

var rays = [{x:0,y:0,dir:"R"}]
visited[0][0] = "R"

var dict = {
    "R,\\": {xDelta:0,yDelta:1,dir:"D",divide:''},
    "L,\\": {xDelta:0,yDelta:-1,dir:"U",divide:''},
    "D,\\": {xDelta:1,yDelta:0,dir:"R",divide:''},
    "U,\\": {xDelta:-1,yDelta:0,dir:"L",divide:''},

    "R,/": {xDelta:0,yDelta:-1,dir:"U",divide:''},
    "L,/": {xDelta:0,yDelta:1,dir:"D",divide:''},
    "D,/": {xDelta:-1,yDelta:0,dir:"L",divide:''},
    "U,/": {xDelta:1,yDelta:0,dir:"R",divide:''},

    "R,.": {xDelta:1,yDelta:0,dir:"R",divide:''},
    "L,.": {xDelta:-1,yDelta:0,dir:"L",divide:''},
    "D,.": {xDelta:0,yDelta:1,dir:"D",divide:''},
    "U,.": {xDelta:0,yDelta:-1,dir:"U",divide:''},

    "R,|": {xDelta:0,yDelta:-1,dir:"U",divide:"D"},
    "L,|": {xDelta:0,yDelta:1,dir:"D",divide:"U"},
    "D,|": {xDelta:0,yDelta:1,dir:"D",divide:''},
    "U,|": {xDelta:0,yDelta:-1,dir:"U",divide:''},

    "R,-": {xDelta:1,yDelta:0,dir:"R",divide:""},
    "L,-": {xDelta:-1,yDelta:0,dir:"L",divide:""},
    "D,-": {xDelta:-1,yDelta:0,dir:"L",divide:'R'},
    "U,-": {xDelta:1,yDelta:0,dir:"R",divide:'L'}
}


for(let i=0;i<110000;i++) {

    rays.forEach((ray, index)=> {

        if(ray.x >= inputArr[0].length || ray.x < 0) return
        if(ray.y >= inputArr.length || ray.y < 0) return
        if(visited[ray.y][ray.x] === ray.dir) {
            return;
        }
        visited[ray.y][ray.x] = ray.dir

        var next = dict[`${ray.dir},${inputArr[ray.y][ray.x]}`]
        if(next.divide !== '') {
            let newRay = {x:ray.x+next.xDelta*-1,y:ray.y+next.yDelta*-1,dir:next.divide}
            rays.push(newRay)
        }
        let updRay = {x:ray.x+next.xDelta,y:ray.y+next.yDelta,dir:next.dir}
        rays[index] = updRay
    })
}

console.log(arrSum(visited.map(i=>i.filter(i=>i!==0).length)))

function arrSum(arr) {

    return arr.reduce((a,b)=>a+b,0)
}
